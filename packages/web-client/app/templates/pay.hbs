{{#if @model.merchantExists}}
  {{page-title (concat "Pay Merchant: " (or @model.merchant.name @model.merchantSafeID)) replace=true}}
{{else}}
  {{page-title "No merchant found" replace=true}}
{{/if}}

<div class="merchant-payment-request-page">
  <div class="merchant-payment-request-page__header">
    <Boxel::OrgTitle
      @title="Card Pay"
      @iconURL={{@model.cardPayLogo}}
      style={{css-var
        boxel-org-title-logo-size="var(--card-pay-logo-size)"
        boxel-org-title-logo-position="left center"
      }}
    />

    <div class="merchant-payment-request-page__links-container">
      <ul class="merchant-payment-request-page__links">
        <li>
          <a href={{@model.aboutURL}}>
            About
          </a>
        </li>
        <li>
          <a href={{@model.supportURL}}>
            Help
          </a>
        </li>
      </ul>
      <CardPay::HamburgerMenu
        class="merchant-payment-request-page__hamburger"
        @open={{this.hamburgerMenuOpen}}
        @onOpen={{fn (mut this.hamburgerMenuOpen) true}}
        @onClose={{fn (mut this.hamburgerMenuOpen) false}}
      >
        <:header>
          <Boxel::OrgTitle
            @title="Card Pay"
            @iconURL={{@model.cardPayLogo}}
            style={{css-var
              boxel-org-title-logo-size="var(--card-pay-logo-size)"
              boxel-org-title-logo-position="left center"
            }}
          />
        </:header>
        <:body as |MenuItem|>
          <MenuItem @url={{@model.aboutURL}}>
            About
          </MenuItem>
          <MenuItem @url={{@model.supportURL}}>
            Help
          </MenuItem>
        </:body>
      </CardPay::HamburgerMenu>
    </div>
  </div>
  {{#if @model.merchantExists}}
    <CardPay::MerchantPaymentRequestCard
      @amount={{this.displayedAmounts.SPD}}
      @usdAmount={{this.displayedAmounts.USD}}
      @merchant={{@model.merchant}}
      @merchantAddress={{@model.merchantSafeID}}
      @paymentURL={{this.paymentURL}}
      @canDeepLink={{this.canDeepLink}}
    />
  {{else}}
    <div class="merchant-payment-request-page__merchant-missing-message" data-test-merchant-missing>
      Oops, no Merchant found - please ask the merchant to confirm the payment link
    </div>
  {{/if}}
</div>
